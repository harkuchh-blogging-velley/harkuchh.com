<!DOCTYPE html> <!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]--><!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]--><!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]--><head><meta charset="utf-8"><title>What Are Cookies and How to Use Them in PHP ? - harkuchh</title><meta name="author" content="harkuchh"><meta name="description" content="What is a cookie A cookie is a small file that we create on user’s computer. Almost every website we visit on internet create and save many …"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="canonical" href="http://harkuchh.com/what-are-cookies-and-how-to-use-them-in-php"><link href="/favicon.png" rel="icon"><link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css"><link href="/atom.xml" rel="alternate" title="harkuchh" type="application/atom+xml"> <script src="/javascripts/modernizr-2.0.js"></script><script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script><script>!window.jQuery&&document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script><script src="/javascripts/octopress.js"></script><link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css"><link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css"> <script>var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-30924112-1"]),_gaq.push(["_trackPageview"]),function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()</script></head><body> <header role="banner"><hgroup><h1><a href="/">harkuchh</a></h1><h2>of your taste...</h2> </hgroup></header> <nav role="navigation"><ul class="subscription" data-subscription="rss"><li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li></ul><form action="http://google.com/search"><fieldset role="search"> <input type="hidden" name="q" value="site:harkuchh.com"/> <input class="search"  name="q" results="0" placeholder="Search"/></fieldset></form><ul class="main-navigation"><li><a href="/">Home</a></li><li><a href="/blog/categories/blogging">Blogging</a></li><li><a href="/blog/categories/technology">Technology</a></li><li><a href="/about">About</a></li></ul></nav><div id="main"><div id="content"><div> <article class="hentry" role="article"> <header><h1 class="entry-title">What Are Cookies and How to Use Them in PHP ?</h1><p class="meta"><time datetime="2012-09-09T00:00:00+05:30" pubdate data-updated="true"></time></p> </header><div class="entry-content"><h3><span style="color:#000"><em><strong>What is a cookie</strong></em></span></h3> <span style="color:#000"><a href="http://harkuchh.com/what-are-cookies-and-how-to-use-them-in-php/what-are-cookies/" rel="attachment wp-att-3951"><img class="alignleft wp-image-3951" title="what are cookies" alt="" src="http://harkuchh.com/wp-content/uploads/2012/09/what-are-cookies.jpg" width="114" height="115"/></a>A cookie is a small file that we create on user’s computer. Almost every website we visit on internet create and save many cookies on our computer for different purposes.</span> <span style="color:#000"> </span><span style="color:#000">If we think our websites as a building, a cookie can be understood as an ID card that is given to every person to distingush that person from all the others who enter the building (</span><span style="color:#000"><a href="http://codersapiens.github.com" target="_blank"><span style="color:#000">visit our site</span></a></span><span style="color:#000">).</span> <span style="color:#000"> </span><span style="color:#000">Use this </span><a href="https://addons.mozilla.org/en-US/firefox/addon/cookies-manager-plus/developers" target="_blank"><span style="color:#000">firefox addon</span></a><span style="color:#000">. Install it, and then open from</span><strong style="color:#000"> Tools&gt;Cookie Manager+</strong><span style="color:#000">. It will show you all the cookies that are present in your browser and you can also edit and delete cookies with this.</span> <span style="color:#000">Use this addon for debugging your application (i.e. to see whether the cookies are really set and with what values).</span> <span style="color:#000"> </span><h3><span style="color:#000"><strong> <em>Why we use cookeis</em></strong></span></h3> <span style="color:#000">Cookies are used to save information. That information can be anything. It’s usually used to save information that is used to identify a user across different pages. For example, when you login to Facebook, it save many cookies to save information to identify you. (use cookie manager+ to see that yourself. Delete all cookies, then login to fb and see how many and what information it save in cookies).</span> <span style="color:#000"><em>Basic purpose is to identify the user who has logged in.</em></span> <span style="color:#000"> </span><h3><strong><span style="color:#000"><em><a href="http://harkuchh.com/tag/how/" target="_blank"><span style="color:#000">How to</span></a> use cookies</em></span></strong></h3> <span style="color:#000">We use setcookie() php function.</span> <span style="color:#000">It has following syntax:</span> <span style="color:#000"> </span> <span style="color:#000">setcookie(name, value, expire, path, domain);</span> <span style="color:#000">Here,</span><ol start="1"><li><span style="color:#000">name is the name with which cookie is saved in browser</span></li><li><span style="color:#000">value is the value of cookie saved</span></li><li><span style="color:#000">expire is the expiration time stamp</span></li><li><span style="color:#000">path is the path on your domain to which the cookie is available</span></li><li><span style="color:#000">domain is domain which can access the cookie (it is your site by default)</span></li></ol> <span style="color:#000"> </span> <span style="color:#000">Just take care of the ‘expire’ parameter. It is a timestamp (like Sept 9, 2012 6:11AM), not how much time to expire the cookie (like 2 hours). People often get confused with this. We use time() function to know current server time, and then add no. of seconds after which it’ll be expired in it. e.g.</span> <span style="color:#000"> </span> <span style="color:#36f">setcookie(“TestCookie”, $value, time()+3600);  /* expire in 1 hour */</span> <span style="color:#000"> </span> <span style="color:#000">Here</span><ol start="1"><li><span style="color:#000">“TestCookie” is the name of cookie</span></li><li><span style="color:#000">$value is the information we want to save in that cookie</span></li><li><span style="color:#000">and third parameter is the expiration time</span></li></ol> <span style="color:#000">Information we want to save is kept in the ‘value’ parameter.</span> <span style="color:#000">Go <a href="http://php.net/manual/en/function.setcookie.php" target="_blank"><span style="color:#000">here (official php documentation)</span></a> for complete information.</span> <span style="color:#000"> </span><h3><span style="color:#000"><em><strong>How to Retrieve Information from Cookies</strong></em></span></h3> <span style="color:#000">Everything we save in cookies is simply available in $_COOKIE[‘cookie_name’] array.</span> <span style="color:#000"> Do you know : <a href="http://harkuchh.com/how-to-access-multiple-facebook-accounts-in-same-browser/" target="_blank"><span style="color:#000"><em>The way to Access Multiple Facebook Accounts in Same Browser</em></span></a></span>  <h3><span style="color:#000"><em><strong>How to Use cookies in real world</strong></em></span></h3> <span style="color:#000">When the user successfully login to your site, set a cookie with some unique identifier that’d help to identify that user all over the site. We do that by setting a cookie with a value that’s unique for every user, like their user_name or user_id (this approach is actually not at all safe, I’ll tell you why in a min). And then when user visit the profile page, read the cookie data and show different pages for different users.</span> <span style="color:#000">Here’s a little example meta-code:</span> <span style="color:#000"> </span><span style="color:#000">After a user successfully logs in, execute this code and redirect user to wherever you want (may be their profile page)</span> <span style="color:#000"> </span><p style="padding-left:60px"><span style="color:red">if(login == ‘successful’) {</span></p><p style="padding-left:60px"><span style="color:red">  setcookie(“authenticated”, “true”, time()+3600);</span></p><p style="padding-left:60px"><span style="color:red"> setcookie(“user_id”, “9”, time()+3600);</span></p><p style="padding-left:60px"><span style="color:red">}</span></p> <span style="color:#000"> </span> <span style="color:#000">And then on user.php page, fetch the data for user with user_id 9.</span> <span style="color:#000">i.e. <span style="color:green">SELECT * FROM users_db WHERE user_id= $_COOKIE[‘user_id’]</span></span> <span style="color:#000"> </span> <span style="color:#000">But this approach is not safe. Anyone can change the user_id value in cookie (with addons like above) and access other users’ data. Simplest way to avoid this is by ‘not’ using cookies for login data. Sites like facebook use cookies, but they use complex algorithms to make them secure.</span> <span style="color:#000"> </span> <span style="color:#000">Use session variables instead of cookies. Sessions are stored on server, so they are not directly accessible to user and hence offer more security.</span> <span style="color:#000"><strong><em>For example</em></strong>, after a successful user login:</span> <span style="color:#000"> </span><p style="padding-left:30px"><span style="color:red">if(login == ‘successful’) {</span></p><p style="padding-left:30px"><span style="color:red"> $_SESSION[‘logged_in’] = true;</span></p><p style="padding-left:30px"><span style="color:red"> $_SESSION[‘user_id’] = $user_id;</span></p><p style="padding-left:30px"><span style="color:red">}</span></p><p style="padding-left:30px"><span style="color:red"> </span></p> <span style="color:#000">and they can be accessed as regular php variables after that. On user.php page, just check if user is ‘logged_in’ and</span> <span style="color:#000">fetch his personal data from database:</span> <span style="color:#000"> </span><p style="padding-left:30px"><span style="color:green">if($_SESSION[‘logged_in’] == true) {</span></p><p style="padding-left:30px"><span style="color:red"> SELECT * FROM user_db WHERE user_id = “$_SESSION[‘user_id’]”</span></p> <span style="color:#000"> </span> <span style="color:#000">This approach is safe</span> <span style="color:#000"> </span> <span style="color:#000">In short,</span><ol start="1"><li><span style="color:#000">Use cookies for saving non critical data (not needed in your project)</span></li><li><span style="color:#000">Use $_SESSION variables for checking the logged_in users</span></li></ol> <span style="color:#000">And if you want to use cookies anyway (for learning or whatever reason you have),</span><ol start="1"><li><span style="color:#000">Set cookies when user successfully log in with setcookie()</span></li><li><span style="color:#000">Set a cookie with a value that will uniquely identify a user (like his user_id)</span></li><li><span style="color:#000">Use those cookies (with $_COOKIE[‘cookie_name’]) wherever you need, like on user’s profile page</span></li></ol> <span style="color:#000">Same goes for the session variables.</span> <span style="color:#000"> </span> <span style="color:#000">You must read tutorial to get it better, because all the <a href="http://harkuchh.com/top-blogs-and-bloggers-of-india-and-their-earnings/">top blogger</a> and everyone says everytime Nothing teaches better than a quick tutorial. Click here..</span> <span style="color:#000">You also love : <em><a href="http://harkuchh.com/how-to-manage-a-lot-of-downloads/" target="_blank"><span style="color:#000">How To Manage a Lot Of Downloads</span></a></em></span></div><footer><p class="meta"><span class="byline author vcard">Posted by <span class="fn">harkuchh - </span></span><time datetime="2012-09-09T00:00:00+05:30" pubdate data-updated="true"></time><span class="categories"> <a class='category' href='/blog/categories/new-technology/'>NEW TECHNOLOGY</a>, <a class='category' href='/blog/categories/tips/'>TIPS</a> </span></p><div class="sharing"> <a href="//twitter.com/share" class="twitter-share-button" data-url="http://harkuchh.com/what-are-cookies-and-how-to-use-them-in-php/" data-via="" data-counturl="http://harkuchh.com/what-are-cookies-and-how-to-use-them-in-php/">Tweet</a><div class="g-plusone" data-size="medium"></div><div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div></div><p class="meta"> <a class="basic-alignment left" href="/tutorial-to-understand-cookies-better/" title="Previous Post: Tutorial To Understand 'COOKIES' Better">« Tutorial To Understand 'COOKIES' Better</a> <a class="basic-alignment right" href="/all-basic-abbreviations-valuable-information/" title="Next Post: All basic Abbreviations, Valuable Information">All basic Abbreviations, Valuable Information »</a></p> </footer> </article></div><aside class="sidebar"> <section><h1>Recent Posts</h1><ul id="recent_posts"><li class="post"> <a href="/5-firefox-plugins-i-cant-live-without/">5 Firefox Plugins I Can't Live Without</a></li><li class="post"> <a href="/why-bloggers-need-to-save-themselves-from-google-lesson-we-got-after-losing-400k/">Why Bloggers Need to Save Themselves From Google: Lesson We Got After Losing 400K</a></li><li class="post"> <a href="/why-i-am-learning-python/">Why I Am Learning Python</a></li><li class="post"> <a href="/five-reasons-for-why-you-should-learn-programming/">Five Reasons Why Every Blogger Should Learn Programming</a></li><li class="post"> <a href="/strong-passwords-weak-passwords-how-to-generate-strongest-possible-passwords-which-you-can-remember/">Strong Passwords, Weak Passwords: How to Generate Strongest Possible Passwords Which You Can Remember</a></li></ul> </section> </aside></div></div> <footer role="contentinfo"><p> Copyright © 2014 - harkuchh</p></footer><script>var disqus_shortname="harkuchh",disqus_script="count.js";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/"+disqus_script,(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}()</script><div id="fb-root"></div> <script>!function(e,n,t){var a,c=e.getElementsByTagName(n)[0];e.getElementById(t)||(a=e.createElement(n),a.id=t,a.async=!0,a.src="//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1",c.parentNode.insertBefore(a,c))}(document,"script","facebook-jssdk")</script><script>!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://apis.google.com/js/plusone.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script>!function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="//platform.twitter.com/widgets.js",document.getElementsByTagName("head")[0].appendChild(t)}()</script></body></html>